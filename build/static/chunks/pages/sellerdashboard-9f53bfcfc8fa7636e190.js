(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[137],{82526:function(e,t,r){"use strict";var n=r(85893),o=(r(67294),r(21890),r(14494)),i=r(72132),a=r(31508),s=r(52543),l=r(22318);r(68054),(0,s.Z)((function(e){return{margin:{margin:e.spacing(2),textDecoration:"none"},button:{margin:e.spacing.unit,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:"#ffffff",boxShadow:"none"},"&:active":{boxShadow:"none",backgroundColor:"#ffffff"}},paper:{margin:"auto"}}}))((function(e){(0,o.v9)((function(e){return e.firebase.auth})),(0,o.v9)((function(e){return e}));var t=(0,o.I0)(),r=e.classes,s=e.data;(0,o.v9)((function(e){return e.storeItems.addedItems}));return(0,n.jsx)(a.zx,{className:r.button,onClick:function(e){var r;e.preventDefault(),r=s.id,t(addQuantityWithNumber(r,1)),i.Am.success("Added to the cart",{position:"bottom-left",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),t({type:"DESTROY_SESSION"})},style:{textDecoration:"none"},children:(0,n.jsx)(l.Z,{variant:"button",children:"ADD TO CART"})})}))},77341:function(e,t,r){"use strict";r.d(t,{Z:function(){return v}});var n=r(85893),o=r(26265),i=(r(67294),r(14494)),a=r(41120),s=r(18463),l=r(41749),c=r(24837),d=r(282),u=r(79912),m=r(22318),p=r(10064),f=r(28428),h=r(63957);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b=(0,a.Z)((function(e){var t,r;return{card:{maxWidth:250,maxHeight:100},media:{height:100,width:"33%",marginLeft:"33%"},root:{display:"flex",margin:e.spacing(2)},details:{display:"flex",flexDirection:"space-between",width:"100%"},buttons:{display:"flex",flexDirection:"row",marginTop:"10px"},itemTotal:x(x({},e.mixins.gutters()),{},(t={maxWidth:"70",display:"flex",marginLeft:"70%"},(0,o.Z)(t,e.breakpoints.down("md"),{marginLeft:"2%",marginRight:"2%"}),(0,o.Z)(t,"marginTop","10px"),t)),imgCover:(r={height:100,width:120},(0,o.Z)(r,e.breakpoints.down("md"),{marginTop:"10%",height:70,width:80}),(0,o.Z)(r,"margin",e.spacing(2)),(0,o.Z)(r,"borderRadius",16),r)}}));function v(e){var t=b(),r=e.quantity,o=(e.title,e.price),a=e.desc,g=e.url,x=e.id,v=e.removeFoodItem,j=e.addItem,y=e.subtractItem;(0,i.I0)();return(0,n.jsxs)(s.Z,{className:t.root,children:[(0,n.jsx)("img",{src:g,className:t.imgCover,alt:a}),(0,n.jsx)(l.Z,{item:!0,xs:8,children:(0,n.jsxs)(u.Z,{children:[(0,n.jsx)(m.Z,{variant:"subtitle2",children:a}),(0,n.jsxs)(m.Z,{variant:"subtitle2",children:["\xa0 ","\u20b9"," ",o," x ",r]}),(0,n.jsxs)(m.Z,{variant:"subtitle2",children:["\xa0 ","\u20b9"," ",o*r]}),(0,n.jsxs)(c.Z,{className:t.itemTotal,children:[(0,n.jsx)(d.Z,{size:"small",variant:"contained",color:"primary",onClick:function(e){return j(x)},children:(0,n.jsx)(h.Z,{})}),(0,n.jsx)(d.Z,{size:"small",onClick:function(e){return v(x)},children:(0,n.jsx)(f.Z,{})}),(0,n.jsx)(d.Z,{size:"small",variant:"contained",color:"secondary",onClick:function(e){return y(x)},children:(0,n.jsx)(p.Z,{})})]})]})})]})}},67752:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return re}});var n=r(85893),o=r(67294),i=r(26265),a=r(14494),s=r(91071),l=r(31508),c=(r(48837),r(61798)),d=r(91143),u=r(35404),m=(r(37698),r(68054)),p=r(2014),f=r(30381),h=r.n(f),g=(r(21890),r(58776)),x=r(11163),b=r(22318),v=r(99545),j=r(80447),y=r(19212),Z=r(95477),O=r(41120),I=r(41749),C=r(7397),w=r(282),D=r(77341);function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P=[],k=[{id:"none",title:"Select"},{id:"Cash",title:"Cash"},{id:"Card",title:"Card"}],N=[{id:"none",title:"Select"},{id:"Delivery",title:"Delivery"},{id:"Takeaway",title:"Takeaway"}],E=[{id:"none",title:"Select"}],M=[{id:"none",title:"Select"},{id:"9-11am",title:"9-11am"},{id:"11-1pm",title:"11-1pm"},{id:"1-3pm",title:"1-3pm"},{id:"6-8pm",title:"6-8pm"},{id:"8-10pm",title:"8-10pm"}],B=[],z=(0,O.Z)((function(e){var t;return{root:{flexGrow:1},container:{marginTop:e.spacing(2),marginBottom:e.spacing(5),alignItems:"center"},adornmentText:{"& .MuiTypography-root":{color:"#f3b33d",fontWeight:"bolder",fontSize:"1.5em"}},submitButtonGroup:(t={zIndex:-1,position:"absolute",fontSize:"1.5em"},(0,i.Z)(t,e.breakpoints.down("md"),{fontSize:"1em"}),(0,i.Z)(t,"backgroundColor",e.palette.primary.main),(0,i.Z)(t,"color","#000"),(0,i.Z)(t,"margin",e.spacing(2)),(0,i.Z)(t,"padding",e.spacing(1)),(0,i.Z)(t,"& .MuiButton-label",{textTransform:"none"}),(0,i.Z)(t,"&:hover",{backgroundColor:e.palette.primary.dark}),t),input:{display:"wrap","&::placeholder":(0,i.Z)({color:"Black",fontStyle:"italic",fontSize:"1.2em"},e.breakpoints.down("md"),{fontSize:10})},drawerIcon:{height:"30px",width:"30px"}}}));function F(e){var t=z(),r=(0,o.useState)(0),i=(r[0],r[1],(0,o.useState)("")),f=i[0],O=i[1],T=(0,o.useState)(!1),F=(T[0],T[1],(0,o.useState)(!0)),Y=(F[0],F[1]),_=((0,x.useRouter)(),(0,a.I0)()),L=(0,a.v9)((function(e){return e.location.location})),A=(0,a.v9)((function(e){return e.firebase})),R=(0,a.v9)((function(e){return e.user.customers})),U=(0,a.v9)((function(e){return e.storeItems.total})),G=(L&&L[0],(0,o.useState)(!1)),W=G[0],q=G[1],V=(0,o.useState)(""),X=(V[0],V[1],(0,o.useState)(!1)),H=X[0],Q=X[1];P.push(h()(new Date).format("YYYY-MM-DD")),console.log(R);var J,K=e.values,$=e.setValues,ee=e.errors,te=e.setErrors,re=e.handleInputChange,ne=e.resetForm,oe=e.OrderedFoodItems,ie=e.removeFoodItem,ae=e.subtractItem,se=e.addItem;(0,o.useEffect)((function(){oe.length>="2"||(0,m.nC)(U)>="350"?Y(!1):Y(!0)}),[oe,U]),(0,o.useEffect)((function(){_((0,u.kQ)("users","customerId"))}),[]),(0,o.useEffect)((function(){var e=K.orderDetails.reduce((function(e,t){return e+t.quantity*t.price}),0);$(S(S({},K),{},{grandTotal:(0,m.nC)(e)}))}),[U]),J=R.filter((function(e){if(A.profile.customerId)return e.customerId.toUpperCase()!==A.profile.customerId.toUpperCase()})),console.log(J),J&&J.map((function(e){var t=e.customerId;JSON.stringify(E).includes(t.toUpperCase())||E.push({id:t.toUpperCase(),title:t.toUpperCase()})})),console.log(J);var le=function(e){Q(!0),e.preventDefault(),A&&A.auth.uid&&(K.sellerUid=A.auth.uid,K.sellerId=A.profile.customerId,K.sellerName=A.auth.displayName,K.sellerEmail=A.auth.email,K.sellerMobile=A.profile.mobile),K.deliveryDate=h()(K.deliveryDate).format("YYYY-MM-DD"),function(){var e={};return K.orderDetails.reduce((function(e,t){return e+t.quantity*t.price}),0),e.paymentMethod="none"!==K.paymentMethod?"":"Select Payment method.",e.deliveryTime="none"!==K.deliveryTime?"":"Select Time-slot",e.orderDetails=0!==K.orderDetails.length?"":"Please add items.",e.customerId="none"!==K.customerId?"":"Select Customer",e.orderOption="none"!==K.orderOption?"":"Select Order Delivery option",te(S({},e)),Object.values(e).every((function(e){return""===e}))}()&&Object.values(K).every((function(e){return""!==e}))?(oe&&oe.length?Y(!0):Y(!1),j.Z.thaliOrder().createThaliOrder(A.auth.uid,K).then((function(e){console.log(e),_((0,d.Ev)("Your Order# ".concat(K.orderNumber),"success")),Q(!1),ne(),_((0,g.s9)()),(0,m.ud)(),setTimeout((function(){_((0,d.GT)())}),3e3)})).catch((function(e){_((0,d.Ev)("Something Went Wrong","error")),ne(),setTimeout((function(){_((0,d.GT)())}),3e3),Q(!1)}))):(_((0,d.Ev)("Please validate customer details","error")),setTimeout((function(){_((0,d.GT)())}),3e3),Q(!1))};return(0,n.jsx)(I.Z,{container:!0,spacing:3,children:(0,n.jsxs)(I.Z,{item:!0,xs:12,children:[(0,n.jsx)(s.Z,{onSubmit:le,children:(0,n.jsx)("div",{className:t.root,children:(0,n.jsxs)(I.Z,{container:!0,children:[(0,n.jsxs)(I.Z,{item:!0,xs:12,children:[" ",(0,n.jsxs)(p.Z,{display:"flex",style:{justifyContent:"center"},p:2,m:2,children:[(0,n.jsx)(v.Z,{onClick:function(){q(!W)},className:t.drawerIcon}),(0,n.jsx)("span",{children:f})]})]}),(0,n.jsxs)(I.Z,{item:!0,xs:6,children:[(0,n.jsx)(l.II,{disabled:!0,label:"Order Number",name:"orderNumber",value:K.orderNumber,InputProps:{startAdornment:(0,n.jsx)(C.Z,{className:t.adornmentText,position:"start",children:"#"})}}),(0,n.jsx)(l.Mt,{label:"Decide Date",name:"deliveryDate",value:K.deliveryDate,shouldDisableDate:P,disablePast:!0,onChange:re}),(0,n.jsx)(l.Ph,{label:"Option",name:"orderOption",value:K.orderOption,onChange:re,options:N,error:ee.orderOption}),(0,n.jsx)(l.Ph,{label:"Customer",name:"customerId",value:K.customerId,onChange:function(e){return function(e){console.log(e.target.value),K.customerId=e.target.value;var t=R.filter((function(t){return t.customerId.toUpperCase()===e.target.value}));K.address=t[0].address&&t[0].address?t[0].address+t[0].pin:"No delivery address",K.uid=t[0].uid&&t[0].uid,K.customerId=t[0].customerId&&t[0].customerId,K.customerName=t[0].fname&&"".concat(t[0].fname," ' ' ").concat(t[0].lname),K.email=t[0].email&&t[0].email,K.mobile=t[0].mobile&&t[0].mobile,K.distance=t[0].distance&&t[0].distance,K.pin=t[0].pin&&t[0].pin,O(K.address)}(e)},options:E,error:ee.customerId})]}),(0,n.jsxs)(I.Z,{item:!0,xs:6,children:[(0,n.jsx)(l.Ph,{label:"Time",name:"deliveryTime",value:K.deliveryTime,onChange:re,options:B&&B.length?B:M,error:ee.deliveryTime}),(0,n.jsx)(l.Ph,{label:"Payment Mode",name:"paymentMethod",value:K.paymentMethod,onChange:re,options:k,error:ee.paymentMethod}),(0,n.jsx)(l.II,{disabled:!0,label:"Grand Total",name:"grandTotal",value:K.grandTotal||0,InputProps:{startAdornment:(0,n.jsx)(C.Z,{className:t.adornmentText,position:"start",children:"\u20b9"})}}),(0,n.jsx)(l.II,{label:"Special Note",name:"sNote",value:K.sNote,InputProps:{startAdornment:(0,n.jsx)(C.Z,{className:t.adornmentText,position:"start",children:(0,n.jsx)(y.Z,{})})}})]}),(0,n.jsx)(I.Z,{xs:12,children:(0,n.jsx)(p.Z,{display:"flex",style:{justifyContent:"center"},p:1,m:1,className:t.box,children:(0,n.jsxs)(w.Z,{variant:"outlined",size:"large",onClick:le,disabled:H,children:[(0,n.jsx)(b.Z,{children:"SUBMIT"}),H?(0,n.jsx)(Z.Z,{size:30}):null]})})}),oe&&oe.length?(0,n.jsx)(I.Z,{xs:12,children:oe.map((function(e){return(0,o.createElement)(D.Z,S(S({},e),{},{key:e.id,removeFoodItem:ie,addItem:se,subtractItem:ae}))}))}):null]})})}),(0,n.jsx)(c.Z,{})]})})}var Y=r(14731),_=r(24837),L=r(51907),A=(r(82526),r(43832)),R=(r(66738),r(8286)),U=r(10064),G=r(28428),W=r(63957),q=(0,O.Z)((function(e){return{searchPaper:{padding:"2px 4px",display:"flex",alignItems:"center"},displayPaper:{margin:e.spacing(4),marginLeft:"auto"},options:{marginLeft:"auto"},searchInput:{marginLeft:e.spacing(1.5),marginRight:e.spacing(2),flex:1},listRoot:{marginTop:e.spacing(1),maxHeight:350,overflow:"auto",backgroundColor:"#000000",color:"White",border:1,"& li:hover":{cursor:"pointer",backgroundColor:e.palette.primary.dark},"& li:hover .MuiButtonBase-root":{display:"block",color:"#000"},"& .MuiButtonBase-root":{display:"none"},"& .MuiButtonBase-root:hover":{backgroundColor:"transparent"}},listTxt:(0,i.Z)({},e.breakpoints.down("sm"),{fontSize:".2em",display:"inline"}),root:{flexGrow:1,marginTop:e.spacing(2),marginBottom:e.spacing(4),display:"flex",overflow:"hidden"},gridList:{width:"auto",height:"auto"},icon:{color:"rgba(255, 255, 255, 0.54)"},container:{marginTop:e.spacing(2),marginBottom:e.spacing(5),position:"relative",display:"flex",flexDirection:"column",alignItems:"center"},customButton:{margin:e.spacing(1),borderRadius:15,width:200,textTransform:"none",fontSize:".8rem",color:"white",backgroundColor:e.palette.secondary.light,"&:hover":{backgroundColor:e.palette.primary.dark}}}}));function V(e){var t=e.values;e.setValues;console.log(t);var r=(0,a.I0)(),i=(e.addThali,e.OrderedFoodItems);e.handleInputChange,e.errors;console.log(i);var s=(0,o.useState)([]),c=(s[0],s[1],(0,o.useState)([])),d=c[0],u=c[1],m=(0,o.useState)(""),f=m[0],h=m[1],x=q(),v=(0,o.useState)(!1),j=v[0],y=v[1],O=(0,a.v9)((function(e){return e.storeItems.options})),D=[];(0,o.useEffect)((function(){Object.entries(O).map((function(e){return e[1].forEach((function(e){D.push(e)}))}));var e=[].concat(D);e=e.filter((function(e){return e.desc.toLowerCase().includes(f.toLocaleLowerCase())})),console.log(e),u(e)}),[f]);var T=function(e){console.log(e),y(!0),r((0,g.Xq)(e)),y(!1)},S=function(e){return i.find((function(t){return t.id===e}))};return(0,n.jsx)("section",{className:x.root,children:(0,n.jsx)(A.Z,{className:x.container,spacing:1,children:(0,n.jsxs)(I.Z,{container:!0,className:x.root,spacing:2,children:[(0,n.jsx)(I.Z,{item:!0,xs:12,children:(0,n.jsx)(I.Z,{container:!0,justify:"center",spacing:2,children:(0,n.jsx)(R.Z,{style:{width:"50%"},placeholder:"Search for thali",InputProps:{endAdornment:(0,n.jsx)(C.Z,{position:"start",children:(0,n.jsx)(Y.Z,{})})},value:f,onChange:function(e){return h(e.target.value)}})})}),(0,n.jsx)(I.Z,{item:!0,xs:12,children:(0,n.jsx)(I.Z,{container:!0,justify:"center",spacing:2,children:d&&d.length?d.map((function(e){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(l.Zb,{title:e.title,id:e.id,price:e.price,name:e.name,desc:e.desc,url:e.url,children:S&&S(e.id)?(0,n.jsx)(p.Z,{display:"flex",style:{justifyContent:"center"},p:2,bgcolor:"primary.main",children:j?(0,n.jsx)(Z.Z,{color:"secondary",size:50}):(0,n.jsxs)(_.Z,{children:[(0,n.jsx)(w.Z,{onClick:function(t){return T(e.id)},children:(0,n.jsx)(W.Z,{})}),(0,n.jsx)(w.Z,{disabled:!0,children:S(e.id).quantity}),(0,n.jsx)(w.Z,{onClick:function(t){return n=e.id,y(!0),r((0,g.pZ)(n)),void y(!1);var n},children:(0,n.jsx)(U.Z,{})}),(0,n.jsx)(w.Z,{onClick:function(t){return n=e.id,y(!0),r((0,g.cl)(n)),void y(!1);var n},children:(0,n.jsx)(G.Z,{color:"secondary"})})]})}):(0,n.jsx)(p.Z,{display:"flex",style:{justifyContent:"center"},p:2,bgcolor:"primary.main",children:(0,n.jsx)(L.Z,{disableSpacing:!0,children:(0,n.jsx)(w.Z,{className:x.button,onClick:function(t){return T(e.id)},style:{textDecoration:"none"},children:(0,n.jsx)(b.Z,{variant:"button",children:"ADD TO CART"})})})})},e.id)})})):(0,n.jsx)(p.Z,{display:"flex",style:{justifyContent:"center"},marginTop:4,p:1,bgcolor:"primary.main",children:(0,n.jsx)(l.Zb,{title:"No Item Available",id:1111},1111)})})})]})})})}var X=r(82759),H=void 0;function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var K=(0,m.m1)(100),$=function(){return{uid:"",orderNumber:K,email:"",mobile:"",address:"",deliveryDate:h()(new Date).add(1,"d").format("YYYY-MM-DD"),deliveryTime:"none",orderOption:"none",pin:"",distance:"",orderDetails:[],customerId:"none",grandTotal:0,paymentMethod:"none",paymentStatus:"Not Paid",paymentId:"TB111",status:"Placed"}},ee=(0,O.Z)((function(e){return{root:{marginTop:e.spacing(10),marginBottom:e.spacing(12),display:"flex"}}})),te=function(e){var t=(0,a.v9)((function(e){return e.firebase.auth})),r=(0,a.v9)((function(e){return e.firebase})),i=(0,a.I0)(),s=(ee(),(0,o.useState)(!1)),l=(s[0],s[1]),c=(0,a.v9)((function(e){return e.storeItems.addedItems})),d=(0,X.c)($),u=d.values,m=d.setValues,p=d.errors,f=d.setErrors,h=d.handleInputChange,x=d.resetForm;u.orderDetails=c,t.uid||"ROLE_SELLER"!==!r.profile.role||H.props.router.push({pathname:"/"});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(F,J({},{values:u,setValues:m,errors:p,setErrors:f,handleInputChange:h,resetForm:x,OrderedFoodItems:c,removeFoodItem:function(e){l(!0),i((0,g.cl)(e)),l(!1)},subtractItem:function(e){l(!0),i((0,g.pZ)(e)),l(!1)},addItem:function(e){console.log(e),l(!0),i((0,g.Xq)(e)),l(!1)}})),(0,n.jsx)(V,J({},{OrderedFoodItems:c,values:u,setValues:m,errors:p,setErrors:f,handleInputChange:h,resetForm:x}))]})},re=function(e){return(0,n.jsx)(te,{})}},45627:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sellerdashboard",function(){return r(67752)}])}},function(e){e.O(0,[5,128,98,490,774,888,179],(function(){return t=45627,e(e.s=t);var t}));var t=e.O();_N_E=t}]);