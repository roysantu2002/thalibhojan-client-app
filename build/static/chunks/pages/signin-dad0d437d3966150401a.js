(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[176],{73606:function(t,e,r){"use strict";r.r(e);var n=r(85893),a=r(809),s=r.n(a),i=r(92447),o=r(74047),u=r(52700),c=r(4706),l=r(8127),d=r(44102),h=r(20775),p=r(26265),f=r(2014),m=r(282),g=r(95477),Z=r(75834),w=r(41749),v=r(89659),x=r(79895),b=r(52543),y=r(8286),j=r(22318),S=r(11163),E=r(67294),C=r(14494),N=r(72132),_=r(11195),k=r(66251),R=r(2060),I=r(86532),T=r(34692);function L(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,h.Z)(t);if(e){var a=(0,h.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.Z)(this,r)}}var P={email:"",password:"",emailError:"",passwordError:"",authenticationError:"",hideContent:!0,buttonState:!1},D=function(t){(0,l.Z)(r,t);var e=L(r);function r(t){var n;return(0,o.Z)(this,r),n=e.call(this,t),(0,p.Z)((0,c.Z)(n),"isMounted",!1),(0,p.Z)((0,c.Z)(n),"validateForm",(function(){var t=n.state.emailError,e=n.state.passwordError;return""===t&&""===e})),(0,p.Z)((0,c.Z)(n),"handleChange",(function(t){switch(n.setState({buttonState:!1}),"password"!==t.target.name?n.setState((0,p.Z)({},t.target.name,t.target.value.toLowerCase())):n.setState((0,p.Z)({},t.target.name,t.target.value)),t.target.name){case"email":/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(t.target.value)?n.setState({emailError:""}):n.setState({emailError:"Invalid email"});break;case"password":/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,20}$/.test(t.target.value)?(n.setState({passwordError:""}),n.validateForm()?n.setState({buttonState:!0}):n.setState({buttonState:!1})):n.setState({passwordError:"Max 15, uppercase, numeric and a special character"})}})),(0,p.Z)((0,c.Z)(n),"handleSubmit",(function(t){t.preventDefault(),n.validateForm()&&n.signInUser()})),(0,p.Z)((0,c.Z)(n),"signInUser",(0,i.Z)(s().mark((function t(){var e;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={email:n.state.email,password:n.state.password},t.next=3,n.props.signIn(e);case 3:n.setState({buttonState:!1}),n.setState({email:""}),n.setState({password:""});case 6:case"end":return t.stop()}}),t)})))),n.state=P,console.log(n.props.firebase),n}return(0,u.Z)(r,[{key:"componentDidUpdate",value:function(){console.log(this.props.firebase)}},{key:"render",value:function(t){var e,r=this.props,a=r.loginError,s=r.classes,i=r.loading;return(e=a?function(t){switch(t.code){case"auth/wrong-password":return"Wrong credentials";case"auth/user-not-found":return"User does not exist";case"auth/too-many-requests":return"User blocked. Restore password or try again later";default:return"Something went wrong. Try again"}}(a):null)&&(N.Am.error(e),this.props.clear()),this.props.auth.uid&&("ROLE_SELLER"===this.props.firebase.profile.role?this.props.router.push("/sellerdashboard"):this.props.router.push("/")),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Z.ZP,{}),(0,n.jsx)(w.Z,{container:!0,spacing:2,justify:"center",className:s.root,children:(0,n.jsx)(w.Z,{item:!0,md:5,sm:6,xs:12,style:{borderRadius:1,margin:8,backgroundColor:k.Z.palette.primary.main},children:(0,n.jsxs)(x.Z,{className:s.paper,elevation:2,children:[(0,n.jsxs)(f.Z,{letterSpacing:2,m:2,children:[(0,n.jsx)(_.Z,{}),(0,n.jsx)(j.Z,{variant:"h2",gutterBottom:!0,align:"center",children:"LOGIN"})]}),(0,n.jsxs)("form",{className:s.form,noValidate:!0,children:[(0,n.jsx)(y.Z,{required:!0,id:"email",label:"Email",name:"email",helperText:this.state.emailError,autoFocus:!0,value:this.state.email||"",onChange:this.handleChange}),(0,n.jsx)(y.Z,{required:!0,name:"password",label:"Password",type:"password",id:"password",helperText:this.state.passwordError,value:this.state.password||"",onChange:this.handleChange}),i?(0,n.jsx)(f.Z,{display:"flex",style:{justifyContent:"center"},marginTop:4,letterSpacing:2,children:(0,n.jsxs)(m.Z,{type:"submit",size:"large",className:s.custombutton,variant:"contained",disabled:i,onClick:this.handleSubmit,children:["LOGIN",i?(0,n.jsx)(g.Z,{size:30}):""]})}):(0,n.jsx)(f.Z,{display:"flex",style:{justifyContent:"center"},marginTop:4,letterSpacing:2,children:(0,n.jsx)(m.Z,{type:"submit",size:"large",disabled:!this.state.buttonState,className:s.custombutton,onClick:this.handleSubmit,children:"LOGIN"})}),(0,n.jsxs)(w.Z,{container:!0,children:[(0,n.jsx)(w.Z,{item:!0,xs:6,children:(0,n.jsx)(v.Z,{href:"/forgotpassword",style:{textDecoration:"none"},children:(0,n.jsx)(j.Z,{variant:"h3",children:"Forgot password? "})})}),(0,n.jsx)(w.Z,{item:!0,xs:6,children:(0,n.jsx)(v.Z,{href:"/signup",style:{textDecoration:"none"},children:(0,n.jsx)(j.Z,{variant:"h3",children:" Create account? "})})})]})]})]})})})]})}}]),r}(E.Component);e.default=(0,C.$j)((function(t){return{state:t,loginError:t.auth.loginError,auth:t.firebase.auth,firebase:t.firebase,loading:t.ui.loading}}),(function(t){return{signIn:function(e){return t((0,I.zB)(e))},clear:function(){return t({type:R.wR})}}}))((0,b.Z)(T.Z,{withTheme:!0})((0,S.withRouter)(D)))},66495:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/signin",function(){return r(73606)}])},92447:function(t,e,r){"use strict";function n(t,e,r,n,a,s,i){try{var o=t[s](i),u=o.value}catch(c){return void r(c)}o.done?e(u):Promise.resolve(u).then(n,a)}function a(t){return function(){var e=this,r=arguments;return new Promise((function(a,s){var i=t.apply(e,r);function o(t){n(i,a,s,o,u,"next",t)}function u(t){n(i,a,s,o,u,"throw",t)}o(void 0)}))}}r.d(e,{Z:function(){return a}})}},function(t){t.O(0,[774,888,179],(function(){return e=66495,t(t.s=e);var e}));var e=t.O();_N_E=e}]);