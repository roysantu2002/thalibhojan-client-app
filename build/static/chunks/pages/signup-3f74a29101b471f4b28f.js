(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[616],{63908:function(t,e,r){"use strict";r.r(e);var a=r(85893),n=r(809),s=r.n(n),i=r(92447),o=r(74047),l=r(52700),u=r(4706),c=r(8127),h=r(44102),d=r(20775),p=r(26265),m=r(41749),g=r(11543),f=r(22318),Z=r(79895),w=r(8286),v=r(7397),x=r(17812),y=r(2014),E=r(282),S=r(95477),N=r(52543),b=r(20067),j=r(28270),C=r(11163),k=r(67294),T=r(14494),R=r(59251),P=r(72132),_=r(21890),A=r(11195),O=r(66251),M=r(2060),V=r(86532),z=r(86395),I=r(34692),U=r(68054);function q(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,a=(0,d.Z)(t);if(e){var n=(0,d.Z)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,h.Z)(this,r)}}var D,F=function(){var t=["images/8portion/8-portion-chicken.png","images/8portion/8-portion-egg.png","images/8portion/8-portion-fish.png"],e=Math.floor(Math.random()*t.length);D=t[e]};F();var L={firstName:"",lastName:"",email:"",password:"",phone:"",firstNameError:"",lastNameError:"",emailError:"",passwordError:"",phoneError:"",infoMessage:"",loader:!1,hideContent:!0,alertMessage:"",createUserWithEmail:!1,savetoDB:!1,numInputs:6,uid:"",buttonState:!1,isLogginActive:!0,showPasswordValue:!0},$=function(t){(0,c.Z)(r,t);var e=q(r);function r(t){var a;return(0,o.Z)(this,r),a=e.call(this,t),(0,p.Z)((0,u.Z)(a),"isMounted",!1),(0,p.Z)((0,u.Z)(a),"validateForm",(function(){var t=a.state.emailError,e=a.state.passwordError;return""===t&&""===e})),(0,p.Z)((0,u.Z)(a),"handleChange",(function(t){var e;switch(console.log(t.target.value),F(),"password"!==t.target.name?a.setState((0,p.Z)({},t.target.name,t.target.value.toLowerCase())):a.setState((0,p.Z)({},t.target.name,t.target.value)),t.target.name){case"firstName":!/^[a-zA-Z]*$/.test(t.target.value)||t.target.value.length<2?a.setState({firstNameError:"First Name!!"}):a.setState({firstNameError:""});break;case"lastName":!/^[a-zA-Z]*$/.test(t.target.value)||t.target.value.length<2?a.setState({lastNameError:"Last Name!!"}):a.setState({lastNameError:""});break;case"email":(e=/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(t.target.value))?a.setState({emailError:""}):a.setState({emailError:"Invalid email"});break;case"password":(e=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,20}$/.test(t.target.value))?a.setState({passwordError:""}):a.setState({passwordError:"Password max 15, one uppercase, numeric and a special character"});break;case"phone":e=/^[3-9]\d\d*$/.test(t.target.value),t.target.value||a.setState({phoneError:"Phone cannot be empty"}),10!==t.target.value.length||!e||function(t){for(var e=0,r=0;r<10;r++)new RegExp(r,"g").test(t)&&e++;return e}(t.target.value)<4?a.setState({phoneError:"Invalid mobile number !!"}):(a.setState({phoneError:""}),a.validateForm()?a.setState({buttonState:!0}):a.setState({buttonState:!1}))}})),(0,p.Z)((0,u.Z)(a),"handleClickShowPassword",(function(){a.setState((function(t){return{showPasswordValue:!t.showPasswordValue}}))})),(0,p.Z)((0,u.Z)(a),"handleSubmit",(function(t){if(t.preventDefault(),""!==a.state.phoneError)return!1;a.validateForm()&&(a.setState({firstNameError:"",lastNameError:"",emailError:"",passwordError:"",phoneError:""}),a.handleSignUp((0,u.Z)(a)))})),(0,p.Z)((0,u.Z)(a),"handleSignUp",(0,i.Z)(s().mark((function t(){var e,r,n,i,o;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.state.firstName,r=a.state.lastName,n=e.charAt(0)+r.charAt(0),i=(0,U.OR)(n),o={email:a.state.email.toLowerCase(),password:a.state.password,custid:i,fname:e,lname:r,phone:a.state.phone},t.next=7,a.props.signUp(o);case 7:case"end":return t.stop()}}),t)})))),a.state=L,a.props.serverStatus(),(0,R.isLoaded)(t.auth)&&!(0,R.isEmpty)(t.auth)?C.default.push("/"):a.state={hideContent:!1},a}return(0,l.Z)(r,[{key:"render",value:function(){var t;console.log(this.props.auth);var e,r=this.props,n=r.classes,s=r.signupError,i=(r.isAuthenticated,r.loading);return(e=s?function(t){switch(console.log(t),t.code){case"auth/email-already-in-use":return"User already exist";default:return"Something went wrong. Try again"}}(s):null)&&(P.Am.error(e),this.props.clear()),(0,a.jsxs)(m.Z,{container:!0,spacing:2,justify:"center",className:n.root,children:[(0,a.jsx)(g.Z,{mdDown:!0,children:(0,a.jsx)(m.Z,{item:!0,xs:!1,md:5,sm:!1,style:{backgroundImage:"url(".concat(D,")"),backgroundRepeat:"no-repeat",borderRadius:20,margin:8,backgroundSize:"cover",backgroundPosition:"center",marginTop:50,maxHeight:250},children:(0,a.jsx)(f.Z,{variant:"h2",children:"Most Healthy Meals"})})}),(0,a.jsx)(m.Z,{item:!0,xs:12,md:6,style:{borderRadius:2,margin:4,backgroundColor:O.Z.palette.primary.main},children:(0,a.jsxs)(Z.Z,{className:n.paper,elevation:2,children:[(0,a.jsxs)(y.Z,{letterSpacing:2,children:[(0,a.jsx)(A.Z,{}),(0,a.jsx)(f.Z,{variant:"h2",gutterBottom:!0,align:"center",children:"REGISTER"})]}),(0,a.jsxs)("form",{className:n.form,onSubmit:this.handleSubmit,noValidate:!0,children:[(0,a.jsx)(m.Z,{item:!0,xs:12,children:(0,a.jsx)(w.Z,{required:!0,id:"firstName",name:"firstName",label:"First Name",style:{width:"100%",marginTop:10,marginRight:10},helperText:this.state.firstNameError,autoFocus:!0,value:this.state.firstName||"",onChange:this.handleChange})}),(0,a.jsx)(m.Z,{item:!0,xs:12,children:(0,a.jsx)(w.Z,{style:{width:"100%",marginTop:10,marginRight:10},required:!0,id:"lastName",label:"Last Name",value:this.state.lastName||"",name:"lastName",error:this.state.lastNameError&&0!==this.state.lastNameError,helperText:this.state.lastNameError,onChange:this.handleChange})}),(0,a.jsx)(m.Z,{item:!0,xs:12,children:(0,a.jsx)(w.Z,{style:{width:"100%",marginTop:10,marginRight:10},required:!0,id:"email",label:"Email",value:this.state.email||"",name:"email",error:this.state.emailError&&0!==this.state.emailError,helperText:this.state.emailError,onChange:this.handleChange})}),(0,a.jsx)(m.Z,{item:!0,xs:12,children:(0,a.jsx)(w.Z,{style:{width:"100%",marginTop:10,marginRight:10},required:!0,name:"password",label:"Password",error:this.state.passwordError&&0!==this.state.passwordError,helperText:this.state.passwordError,value:this.state.password||"",type:this.state.showPasswordValue?"text":"password",id:"password",InputProps:{endAdornment:(0,a.jsx)(v.Z,{position:"end",children:(0,a.jsx)(x.Z,{edge:"end",onClick:this.handleClickShowPassword,children:this.state.showPasswordValue?(0,a.jsx)(b.Z,{}):(0,a.jsx)(j.Z,{})})})},autoComplete:"current-password",onChange:this.handleChange})}),(0,a.jsx)(m.Z,{item:!0,xs:12,children:(0,a.jsx)(w.Z,{style:{width:"100%",marginTop:10,marginRight:10},required:!0,value:this.state.phone||"",name:"phone",label:"Mobile number",type:"phone",id:"phone",error:this.state.phoneError&&0!==this.state.phoneError,helperText:this.state.phoneError,onChange:this.handleChange})}),i?(0,a.jsx)(y.Z,{display:"flex",style:{justifyContent:"center"},marginTop:4,children:(0,a.jsxs)(E.Z,(t={type:"submit",size:"large",className:n.custombutton,variant:"contained",disabled:i},(0,p.Z)(t,"className",n.custombutton),(0,p.Z)(t,"onClick",this.handleSubmit),(0,p.Z)(t,"children",["SIGN UP",i?(0,a.jsx)(S.Z,{size:30}):null]),t))}):(0,a.jsx)(y.Z,{letterSpacing:2,children:(0,a.jsx)(E.Z,{type:"submit",size:"large",className:n.custombutton,variant:"contained",disabled:!this.state.buttonState,onClick:this.handleSubmit,children:"SIGN UP"})}),this.state.infoMessage,(0,a.jsxs)(m.Z,{item:!0,xs:12,children:[(0,a.jsx)(y.Z,{p:2,m:2}),(0,a.jsx)(_.Z,{href:"/signin",style:{textDecoration:"none"},children:(0,a.jsx)(f.Z,{variant:"h3",children:"Have an account? Sign in"})})]})]})]})})]})}}]),r}(k.Component);e.default=(0,T.$j)((function(t){return{signupError:t.auth.signupError,isAuthenticated:t.auth.isAuthenticated,loading:t.ui.loading,state:t}}),(function(t){return{signUp:function(e){return t((0,V.y1)(e))},clear:function(){return t({type:M.wR})},serverStatus:function(){return t(z.HG)}}}))((0,N.Z)(I.Z,{withTheme:!0})($))},86395:function(t,e,r){"use strict";r.d(e,{yp:function(){return s},M3:function(){return i},zk:function(){return o},HG:function(){return l},kg:function(){return u}});var a=r(80447),n=r(2060),s=function(t,e,r){return function(s){a.Z.thaliOrder().postOrderStatus(t,e,r).then((function(t){s({type:n.sT,payload:t.data.updatedOrder})})).catch((function(t){console.log(t.response)}))}},i=function(t){return function(e){e({type:n.sT,payload:t})}},o=function(t,e){return function(r){r({type:n.Vy}),console.log(t),a.Z.thaliOrder().getThaliOrders(t,e).then((function(t){console.log(t),r({type:n._q,payload:t.data})})).catch((function(t){console.log(t),r({type:n.Vy})}))}},l=function(){return function(t){t({type:n.Vy}),a.Z.thaliOrder().home().then((function(e){t({type:n.pp})})).catch((function(e){t({type:n.Vy})}))}},u=function(t,e,r){return function(s){a.Z.thaliOrder().paymentStatus(t,e,r).then((function(t){s({type:n.sT,payload:t.data.updatedOrder})})).catch((function(t){console.log(t.response)}))}}},38971:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/signup",function(){return r(63908)}])}},function(t){t.O(0,[623,774,888,179],(function(){return e=38971,t(t.s=e);var e}));var e=t.O();_N_E=e}]);