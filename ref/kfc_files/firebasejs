var firebase=function(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={i:r,l:!1,exports:{}};return n[r].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var i={};return t.m=n,t.c=i,t.i=function(n){return n},t.d=function(n,i,r){t.o(n,i)||Object.defineProperty(n,i,{configurable:!1,enumerable:!0,get:r})},t.n=function(n){var i=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(i,"a",i),i},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=11)}([function(n,t,i){"use strict";(function(n){var r,u;if(Object.defineProperty(t,"__esModule",{value:!0}),r=void 0,void 0!==n)r=n;else if("undefined"!=typeof self)r=self;else try{r=Function("return this")()}catch(n){throw new Error("polyfill failed because global object is unavailable in this environment");}u=r.Promise||i(8);t.local={Promise:u,GoogPromise:u}}).call(t,i(1))},function(n){var t=function(){return this}();try{t=t||Function("return this")()||eval("this")}catch(n){"object"==typeof window&&(t=window)}n.exports=t},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(5),u=r.createFirebaseNamespace();t.default=u;n.exports=t.default},function(n,t){"use strict";function r(n){return i(void 0,n)}function i(n,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===n&&(n={});break;case Array:n=[];break;default:return t}for(var r in t)t.hasOwnProperty(r)&&(n[r]=i(n[r],t[r]));return n}function u(n,t,i){n[t]=i}Object.defineProperty(t,"__esModule",{value:!0});t.deepCopy=r;t.deepExtend=i;t.patchProperty=u},function(n,t){"use strict";function u(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function o(n){var t=r;return r=n,t}var f,r,i,e;Object.defineProperty(t,"__esModule",{value:!0});f=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}();t.patchCapture=o;r=Error.captureStackTrace;i=function n(t,i){if(u(this,n),this.code=t,this.message=i,r)r(this,e.prototype.create);else{var f=Error.apply(this,arguments);this.name="FirebaseError";Object.defineProperty(this,"stack",{get:function(){return f.stack}})}};i.prototype=Object.create(Error.prototype);i.prototype.constructor=i;i.prototype.name="FirebaseError";e=t.ErrorFactory=function(){function n(t,i,r){u(this,n);this.service=t;this.serviceName=i;this.errors=r;this.pattern=/\{\$([^}]+)}/g}return f(n,[{key:"create",value:function(n,t){var f,r;void 0===t&&(t={});var e=this.errors[n],o=this.service+"/"+n,u=void 0;u=void 0===e?"Error":e.replace(this.pattern,function(n,i){var r=t[i];return void 0!==r?r.toString():"<"+i+"?>"});u=this.serviceName+": "+u+" ("+o+").";f=new i(o,u);for(r in t)t.hasOwnProperty(r)&&"_"!==r.slice(-1)&&(f[r]=t[r]);return f}}]),n}()},function(n,t,i){"use strict";function y(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function s(){function h(t){t=t||o;var i=n[t];return void 0===i&&u("no-app",{name:t}),i}function v(n,t){Object.keys(i).forEach(function(i){var r=y(n,i);null!==r&&a[r]&&a[r](t,n)})}function y(n,t){if("serverAuth"===t)return null;var r=t,f=n.options;return"auth"===t&&(f.serviceAccount||f.credential)&&(r="serverAuth","serverAuth"in i||u("sa-not-supported")),r}var n={},i={},a={},t={__esModule:!0,initializeApp:function(i,s){void 0===s?s=o:"string"==typeof s&&""!==s||u("bad-app-name",{name:s+""});void 0!==n[s]&&u("duplicate-app",{name:s});var h=new f(i,s,t);return n[s]=h,v(h,"create"),void 0!=h.INTERNAL&&void 0!=h.INTERNAL.getToken||r.deepExtend(h,{INTERNAL:{getUid:function(){return null},getToken:function(){return e.resolve(null)},addAuthTokenListener:function(){},removeAuthTokenListener:function(){}}}),h},app:h,apps:null,Promise:e,SDK_VERSION:"3.9.0",INTERNAL:{registerService:function(n,f,e,s,c){i[n]&&u("duplicate-service",{name:n});i[n]=c?f:function(n,t){return f(n,t,o)};s&&(a[n]=s);var l=void 0;return l=function(t){return void 0===t&&(t=h()),"function"!=typeof t[n]&&u("invalid-app-argument",{name:n}),t[n]()},void 0!==e&&r.deepExtend(l,e),t[n]=l,l},createFirebaseNamespace:s,extendNamespace:function(n){r.deepExtend(t,n)},createSubscribe:p.createSubscribe,ErrorFactory:c.ErrorFactory,removeApp:function(t){v(n[t],"delete");delete n[t]},factories:i,useAsService:y,Promise:l.local.GoogPromise,deepExtend:r.deepExtend}};return r.patchProperty(t,"default",t),Object.defineProperty(t,"apps",{get:function(){return Object.keys(n).map(function(t){return n[t]})}}),r.patchProperty(h,"App",f),t}function u(n,t){throw v.create(n,t);}var h,a,v;Object.defineProperty(t,"__esModule",{value:!0});h=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}();t.createFirebaseNamespace=s;var r=i(3),p=i(6),c=i(4),l=i(0),e=l.local.Promise,o="[DEFAULT]",f=function(){function n(t,i,u){var f=this,o,e,s;y(this,n);this.firebase_=u;this.isDeleted_=!1;this.services_={};this.name_=i;this.options_=r.deepCopy(t);o="credential"in this.options_;e="serviceAccount"in this.options_;(o||e)&&(s=e?"serviceAccount":"credential","undefined"!=typeof console&&console.log("The '"+s+"' property specified in the first argument to initializeApp() is deprecated and will be removed in the next major version. You should instead use the 'firebase-admin' package. See https://firebase.google.com/docs/admin/setup for details on how to get started."));Object.keys(u.INTERNAL.factories).forEach(function(n){var t=u.INTERNAL.useAsService(f,n),i;null!==t&&(i=f.getService.bind(f,t),r.patchProperty(f,n,i))})}return h(n,[{key:"delete",value:function(){var n=this;return new e(function(t){n.checkDestroyed_();t()}).then(function(){n.firebase_.INTERNAL.removeApp(n.name_);var t=[];return Object.keys(n.services_).forEach(function(i){Object.keys(n.services_[i]).forEach(function(r){t.push(n.services_[i][r])})}),e.all(t.map(function(n){return n.INTERNAL.delete()}))}).then(function(){n.isDeleted_=!0;n.services_={}})}},{key:"getService",value:function(n,t){var i,r;return(this.checkDestroyed_(),void 0===this.services_[n]&&(this.services_[n]={}),i=t||o,void 0===this.services_[n][i])?(r=this.firebase_.INTERNAL.factories[n](this,this.extendApp.bind(this),t),this.services_[n][i]=r,r):this.services_[n][i]}},{key:"extendApp",value:function(n){r.deepExtend(this,n)}},{key:"checkDestroyed_",value:function(){this.isDeleted_&&u("app-deleted",{name:this.name_})}},{key:"name",get:function(){return this.checkDestroyed_(),this.name_}},{key:"options",get:function(){return this.checkDestroyed_(),this.options_}}]),n}();f.prototype.name&&f.prototype.options||f.prototype.delete||console.log("dc");a={"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."};v=new c.ErrorFactory("app","Firebase",a)},function(n,t,i){"use strict";function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function s(n,t){var i=new a(n,t);return i.subscribe.bind(i)}function h(n,t){return function(){for(var r=arguments.length,u=Array(r),i=0;i<r;i++)u[i]=arguments[i];e.resolve(!0).then(function(){n.apply(void 0,u)}).catch(function(n){t&&t(n)})}}function c(n,t){var s,i,f;if("object"!==(void 0===n?"undefined":u(n))||null===n)return!1;var r=!0,e=!1,o=void 0;try{for(i=t[Symbol.iterator]();!(r=(s=i.next()).done);r=!0)if(f=s.value,f in n&&"function"==typeof n[f])return!0}catch(n){e=!0;o=n}finally{try{!r&&i.return&&i.return()}finally{if(e)throw o;}}return!1}function r(){}var u,f;Object.defineProperty(t,"__esModule",{value:!0});u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};f=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}();t.createSubscribe=s;t.async=h;var l=i(0),e=l.local.Promise,a=function(){function n(t,i){var r=this;o(this,n);this.observers=[];this.unsubscribes=[];this.observerCount=0;this.task=e.resolve();this.finalized=!1;this.onNoObservers=i;this.task.then(function(){t(r)}).catch(function(n){r.error(n)})}return f(n,[{key:"next",value:function(n){this.forEachObserver(function(t){t.next(n)})}},{key:"error",value:function(n){this.forEachObserver(function(t){t.error(n)});this.close(n)}},{key:"complete",value:function(){this.forEachObserver(function(n){n.complete()});this.close()}},{key:"subscribe",value:function(n,t,i){var f=this,u=void 0,e;if(void 0===n&&void 0===t&&void 0===i)throw new Error("Missing Observer.");return u=c(n,["next","error","complete"])?n:{next:n,error:t,complete:i},void 0===u.next&&(u.next=r),void 0===u.error&&(u.error=r),void 0===u.complete&&(u.complete=r),e=this.unsubscribeOne.bind(this,this.observers.length),this.finalized&&this.task.then(function(){try{f.finalError?u.error(f.finalError):u.complete()}catch(n){}}),this.observers.push(u),e}},{key:"unsubscribeOne",value:function(n){void 0!==this.observers&&void 0!==this.observers[n]&&(delete this.observers[n],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(n){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,n)}},{key:"sendOne",value:function(n,t){var i=this;this.task.then(function(){if(void 0!==i.observers&&void 0!==i.observers[n])try{t(i.observers[n])}catch(n){"undefined"!=typeof console&&console.error&&console.error(n)}})}},{key:"close",value:function(n){var t=this;this.finalized||(this.finalized=!0,void 0!==n&&(this.finalError=n),this.task.then(function(){t.observers=void 0;t.onNoObservers=void 0}))}}]),n}()},function(n){function h(){throw new Error("setTimeout has not been defined");}function c(){throw new Error("clearTimeout has not been defined");}function l(n){if(i===setTimeout)return setTimeout(n,0);if((i===h||!i)&&setTimeout)return i=setTimeout,setTimeout(n,0);try{return i(n,0)}catch(t){try{return i.call(null,n,0)}catch(t){return i.call(this,n,0)}}}function y(n){if(r===clearTimeout)return clearTimeout(n);if((r===c||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(n);try{return r(n)}catch(t){try{return r.call(null,n)}catch(t){return r.call(this,n)}}}function p(){o&&e&&(o=!1,e.length?u=e.concat(u):s=-1,u.length&&a())}function a(){var t,n;if(!o){for(t=l(p),o=!0,n=u.length;n;){for(e=u,u=[];++s<n;)e&&e[s].run();s=-1;n=u.length}e=null;o=!1;y(t)}}function v(n,t){this.fun=n;this.array=t}function f(){}var i,r,t=n.exports={};!function(){try{i="function"==typeof setTimeout?setTimeout:h}catch(n){i=h}try{r="function"==typeof clearTimeout?clearTimeout:c}catch(n){r=c}}();var e,u=[],o=!1,s=-1;t.nextTick=function(n){var i=new Array(arguments.length-1),t;if(arguments.length>1)for(t=1;t<arguments.length;t++)i[t-1]=arguments[t];u.push(new v(n,i));1!==u.length||o||l(a)};v.prototype.run=function(){this.fun.apply(null,this.array)};t.title="browser";t.browser=!0;t.env={};t.argv=[];t.version="";t.versions={};t.on=f;t.addListener=f;t.once=f;t.off=f;t.removeListener=f;t.removeAllListeners=f;t.emit=f;t.binding=function(){throw new Error("process.binding is not supported");};t.cwd=function(){return"/"};t.chdir=function(){throw new Error("process.chdir is not supported");};t.umask=function(){return 0}},function(n,t,i){(function(t){!function(i){function h(){}function c(n,t){return function(){n.apply(t,arguments)}}function r(n){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof n)throw new TypeError("not a function");this._state=0;this._handled=!1;this._value=void 0;this._deferreds=[];s(n,this)}function o(n,t){for(;3===n._state;)n=n._value;if(0===n._state)return void n._deferreds.push(t);n._handled=!0;r._immediateFn(function(){var i=1===n._state?t.onFulfilled:t.onRejected,r;if(null===i)return void(1===n._state?f:u)(t.promise,n._value);try{r=i(n._value)}catch(n){return void u(t.promise,n)}f(t.promise,r)})}function f(n,t){try{if(t===n)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var i=t.then;if(t instanceof r)return n._state=3,n._value=t,void e(n);if("function"==typeof i)return void s(c(i,t),n)}n._state=1;n._value=t;e(n)}catch(t){u(n,t)}}function u(n,t){n._state=2;n._value=t;e(n)}function e(n){2===n._state&&0===n._deferreds.length&&r._immediateFn(function(){n._handled||r._unhandledRejectionFn(n._value)});for(var t=0,i=n._deferreds.length;t<i;t++)o(n,n._deferreds[t]);n._deferreds=null}function l(n,t,i){this.onFulfilled="function"==typeof n?n:null;this.onRejected="function"==typeof t?t:null;this.promise=i}function s(n,t){var i=!1;try{n(function(n){i||(i=!0,f(t,n))},function(n){i||(i=!0,u(t,n))})}catch(n){if(i)return;i=!0;u(t,n)}}var a=setTimeout;r.prototype.catch=function(n){return this.then(null,n)};r.prototype.then=function(n,t){var i=new this.constructor(h);return o(this,new l(n,t,i)),i};r.all=function(n){var t=Array.prototype.slice.call(n);return new r(function(n,i){function u(r,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var o=e.then;if("function"==typeof o)return void o.call(e,function(n){u(r,n)},i)}t[r]=e;0==--f&&n(t)}catch(n){i(n)}}if(0===t.length)return n([]);for(var f=t.length,r=0;r<t.length;r++)u(r,t[r])})};r.resolve=function(n){return n&&"object"==typeof n&&n.constructor===r?n:new r(function(t){t(n)})};r.reject=function(n){return new r(function(t,i){i(n)})};r.race=function(n){return new r(function(t,i){for(var r=0,u=n.length;r<u;r++)n[r].then(t,i)})};r._immediateFn="function"==typeof t&&function(n){t(n)}||function(n){a(n,0)};r._unhandledRejectionFn=function(n){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",n)};r._setImmediateFn=function(n){r._immediateFn=n};r._setUnhandledRejectionFn=function(n){r._unhandledRejectionFn=n};void 0!==n&&n.exports?n.exports=r:i.Promise||(i.Promise=r)}(this)}).call(t,i(10).setImmediate)},function(n,t,i){(function(n,t){!function(n,i){"use strict";function l(n){var i,t,r;for("function"!=typeof n&&(n=new Function(""+n)),i=new Array(arguments.length-1),t=0;t<i.length;t++)i[t]=arguments[t+1];return r={callback:n,args:i},s[o]=r,u(o),o++}function c(n){delete s[n]}function a(n){var r=n.callback,t=n.args;switch(t.length){case 0:r();break;case 1:r(t[0]);break;case 2:r(t[0],t[1]);break;case 3:r(t[0],t[1],t[2]);break;default:r.apply(i,t)}}function r(n){if(h)setTimeout(r,0,n);else{var t=s[n];if(t){h=!0;try{a(t)}finally{c(n);h=!1}}}}if(!n.setImmediate){var u,o=1,s={},h=!1,e=n.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(n);f=f&&f.setTimeout?f:n;"[object process]"==={}.toString.call(n.process)?function(){u=function(n){t.nextTick(function(){r(n)})}}():function(){if(n.postMessage&&!n.importScripts){var t=!0,i=n.onmessage;return n.onmessage=function(){t=!1},n.postMessage("","*"),n.onmessage=i,t}}()?function(){var t="setImmediate$"+Math.random()+"$",i=function(i){i.source===n&&"string"==typeof i.data&&0===i.data.indexOf(t)&&r(+i.data.slice(t.length))};n.addEventListener?n.addEventListener("message",i,!1):n.attachEvent("onmessage",i);u=function(i){n.postMessage(t+i,"*")}}():n.MessageChannel?function(){var n=new MessageChannel;n.port1.onmessage=function(n){r(n.data)};u=function(t){n.port2.postMessage(t)}}():e&&"onreadystatechange"in e.createElement("script")?function(){var n=e.documentElement;u=function(t){var i=e.createElement("script");i.onreadystatechange=function(){r(t);i.onreadystatechange=null;n.removeChild(i);i=null};n.appendChild(i)}}():function(){u=function(n){setTimeout(r,0,n)}}();f.setImmediate=l;f.clearImmediate=c}}("undefined"==typeof self?void 0===n?this:n:self)}).call(t,i(1),i(7))},function(n,t,i){function r(n,t){this._id=n;this._clearFn=t}var u=Function.prototype.apply;t.setTimeout=function(){return new r(u.call(setTimeout,window,arguments),clearTimeout)};t.setInterval=function(){return new r(u.call(setInterval,window,arguments),clearInterval)};t.clearTimeout=t.clearInterval=function(n){n&&n.close()};r.prototype.unref=r.prototype.ref=function(){};r.prototype.close=function(){this._clearFn.call(window,this._id)};t.enroll=function(n,t){clearTimeout(n._idleTimeoutId);n._idleTimeout=t};t.unenroll=function(n){clearTimeout(n._idleTimeoutId);n._idleTimeout=-1};t._unrefActive=t.active=function(n){clearTimeout(n._idleTimeoutId);var t=n._idleTimeout;t>=0&&(n._idleTimeoutId=setTimeout(function(){n._onTimeout&&n._onTimeout()},t))};i(9);t.setImmediate=setImmediate;t.clearImmediate=clearImmediate},function(n,t,i){n.exports=i(2)}]);(function(){var y=function(n,t){function u(){}var i,r;u.prototype=t.prototype;n.u=t.prototype;n.prototype=new u;for(i in t)Object.defineProperties?(r=Object.getOwnPropertyDescriptor(t,i),r&&Object.defineProperty(n,i,r)):n[i]=t[i]},rt=this,ut=function(n){var t=typeof n,i;if("object"==t)if(n){if(n instanceof Array)return"array";if(n instanceof Object)return t;if(i=Object.prototype.toString.call(n),"[object Window]"==i)return"object";if("[object Array]"==i||"number"==typeof n.length&&"undefined"!=typeof n.splice&&"undefined"!=typeof n.propertyIsEnumerable&&!n.propertyIsEnumerable("splice"))return"array";if("[object Function]"==i||"undefined"!=typeof n.call&&"undefined"!=typeof n.propertyIsEnumerable&&!n.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==t&&"undefined"==typeof n.call)return"object";return t},p=function(n,t){function i(){}i.prototype=t.prototype;n.u=t.prototype;n.prototype=new i;n.v=function(n,i){for(var u=Array(arguments.length-2),r=2;r<arguments.length;r++)u[r-2]=arguments[r];return t.prototype[i].apply(n,u)}},h=function(n){if(Error.captureStackTrace)Error.captureStackTrace(this,h);else{var t=Error().stack;t&&(this.stack=t)}n&&(this.message=String(n))},w,a,t,i,tt,v,it;p(h,Error);w=function(n){for(var t=n.split("%s"),i="",r=Array.prototype.slice.call(arguments,1);r.length&&1<t.length;)i+=t.shift()+r.shift();return i+t.join("%s")};a=function(n,t){t.unshift(n);h.call(this,w.apply(null,t));t.shift()};p(a,h);var ft=function(n,t){var i,r;if(!n){i="Assertion failed";t&&(i=i+(": "+t),r=Array.prototype.slice.call(arguments,2));throw new a(""+i,r||[]);}},c=null,e=function(n){var t;if(n=new Uint8Array(n),t=ut(n),ft("array"==t||"object"==t&&"number"==typeof n.length,"encodeByteArray takes an array as a parameter"),!c)for(c={},t=0;65>t;t++)c[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t);for(var t=c,e=[],i=0;i<n.length;i+=3){var f=n[i],o=i+1<n.length,r=o?n[i+1]:0,s=i+2<n.length,u=s?n[i+2]:0,h=f>>2,f=(f&3)<<4|r>>4,r=(r&15)<<2|u>>6,u=u&63;s||(u=64,o||(r=64));e.push(t[h],t[f],t[r],t[u])}return e.join("").replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},n={},o=(n["only-available-in-window"]="This method is available in a Window context.",n["only-available-in-sw"]="This method is available in a service worker context.",n["should-be-overriden"]="This method should be overriden by extended classes.",n["bad-sender-id"]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",n["permission-default"]="The required permissions were not granted and dismissed instead.",n["permission-blocked"]="The required permissions were not granted and blocked instead.",n["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",n["notifications-blocked"]="Notifications have been blocked.",n["failed-serviceworker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",n["sw-registration-expected"]="A service worker registration was the expected input.",n["get-subscription-failed"]="There was an error when trying to get any existing Push Subscriptions.",n["invalid-saved-token"]="Unable to access details of the saved token.",n["sw-reg-redundant"]="The service worker being used for push was made redundant.",n["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$message}",n["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",n["token-subscribe-no-push-set"]="FCM returned an invalid response when getting an FCM token.",n["use-sw-before-get-token"]="You must call useServiceWorker() before calling getToken() to ensure your service worker is used.",n["invalid-delete-token"]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",n["delete-token-not-found"]="The deletion attempt for token could not be performed as the token was not found.",n["delete-scope-not-found"]="The deletion attempt for service worker scope could not be performed as the scope was not found.",n["bg-handler-function-expected"]="The input to setBackgroundMessageHandler() must be a function.",n["no-window-client-to-msg"]="An attempt was made to message a non-existant window client.",n["unable-to-resubscribe"]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$message}",n["no-fcm-token-for-resubscribe"]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",n["failed-to-delete-token"]="Unable to delete the currently saved token.",n["no-sw-in-reg"]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",n["incorrect-gcm-sender-id"]="Please change your web app manifest's 'gcm_sender_id' value to '103953800507' to use Firebase messaging.",n["bad-scope"]="The service worker scope must be a string with at least one character.",n["bad-vapid-key"]="The public VAPID key must be a string with at least one character.",n["bad-subscription"]="The subscription must be a valid PushSubscription.",n["bad-token"]="The FCM Token used for storage / lookup was not a valid token string.",n["bad-push-set"]="The FCM push set used for storage / lookup was not not a valid push set string.",n["failed-delete-vapid-key"]="The VAPID key could not be deleted.",n),b={userVisibleOnly:!0,applicationServerKey:new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110])},r=new firebase.INTERNAL.ErrorFactory("messaging","Messaging",o),f=function(){this.a=null},l=function(n){return n.a?n.a:(n.a=new Promise(function(n,t){var i=rt.indexedDB.open("fcm_token_details_db",1);i.onerror=function(n){t(n.target.error)};i.onsuccess=function(t){n(t.target.result)};i.onupgradeneeded=function(n){n=n.target.result.createObjectStore("fcm_token_object_Store",{keyPath:"swScope"});n.createIndex("fcmSenderId","fcmSenderId",{unique:!1});n.createIndex("fcmToken","fcmToken",{unique:!0})}}),n.a)},et=function(n){n.a?n.a.then(function(t){t.close();n.a=null}):Promise.resolve()},k=function(n,t){return l(n).then(function(n){return new Promise(function(i,r){var u=n.transaction(["fcm_token_object_Store"]).objectStore("fcm_token_object_Store").index("fcmToken").get(t);u.onerror=function(n){r(n.target.error)};u.onsuccess=function(n){i(n.target.result)}})})},ot=function(n,t){return l(n).then(function(n){return new Promise(function(i,r){var u=[],f=n.transaction(["fcm_token_object_Store"]).objectStore("fcm_token_object_Store").openCursor();f.onerror=function(n){r(n.target.error)};f.onsuccess=function(n){(n=n.target.result)?(n.value.fcmSenderId===t&&u.push(n.value),n.continue()):i(u)}})})},d=function(n,t,i){var u=e(t.getKey("p256dh")),f=e(t.getKey("auth"));return n="authorized_entity="+n+"&"+("endpoint="+t.endpoint+"&")+("encryption_key="+u+"&")+("encryption_auth="+f),i&&(n+="&pushSet="+i),i=new Headers,i.append("Content-Type","application/x-www-form-urlencoded"),fetch("https://fcm.googleapis.com/fcm/connect/subscribe",{method:"POST",headers:i,body:n}).then(function(n){return n.json()}).then(function(n){if(n.error)throw r.create("token-subscribe-failed",{message:n.error.message});if(!n.token)throw r.create("token-subscribe-no-token");if(!n.pushSet)throw r.create("token-subscribe-no-push-set");return{token:n.token,pushSet:n.pushSet}})},st=function(n,t,i,r,u,f){var o={swScope:i.scope,endpoint:r.endpoint,auth:e(r.getKey("auth")),p256dh:e(r.getKey("p256dh")),fcmToken:u,fcmPushSet:f,fcmSenderId:t};return l(n).then(function(n){return new Promise(function(t,i){var r=n.transaction(["fcm_token_object_Store"],"readwrite").objectStore("fcm_token_object_Store").put(o);r.onerror=function(n){i(n.target.error)};r.onsuccess=function(){t()}})})};f.prototype.i=function(n,t){return t instanceof ServiceWorkerRegistration?"string"!=typeof n||0===n.length?Promise.reject(r.create("bad-sender-id")):ot(this,n).then(function(i){if(0!==i.length){var r=i.findIndex(function(i){return t.scope===i.swScope&&n===i.fcmSenderId});if(-1!==r)return i[r]}}).then(function(n){if(n)return t.pushManager.getSubscription().catch(function(){throw r.create("get-subscription-failed");}).then(function(t){var i;return(i=t)&&(i=t.endpoint===n.endpoint&&e(t.getKey("auth"))===n.auth&&e(t.getKey("p256dh"))===n.p256dh),i?n.fcmToken:void 0})}):Promise.reject(r.create("sw-registration-expected"))};f.prototype.getSavedToken=f.prototype.i;f.prototype.h=function(n,t){var i=this;return"string"!=typeof n||0===n.length?Promise.reject(r.create("bad-sender-id")):t instanceof ServiceWorkerRegistration?t.pushManager.getSubscription().then(function(n){return n?n:t.pushManager.subscribe(b)}).then(function(r){return d(n,r).then(function(u){return st(i,n,t,r,u.token,u.pushSet).then(function(){return u.token})})}):Promise.reject(r.create("sw-registration-expected"))};f.prototype.createToken=f.prototype.h;f.prototype.deleteToken=function(n){var t=this;return"string"!=typeof n||0===n.length?Promise.reject(r.create("invalid-delete-token")):k(this,n).then(function(n){if(!n)throw r.create("delete-token-not-found");return l(t).then(function(t){return new Promise(function(i,u){var f=t.transaction(["fcm_token_object_Store"],"readwrite").objectStore("fcm_token_object_Store").delete(n.swScope);f.onerror=function(n){u(n.target.error)};f.onsuccess=function(t){0===t.target.result?u(r.create("failed-to-delete-token")):i(n)}})})})};t=function(n){var t=this;if(this.a=new firebase.INTERNAL.ErrorFactory("messaging","Messaging",o),!n.options.messagingSenderId||"string"!=typeof n.options.messagingSenderId)throw this.a.create("bad-sender-id");this.l=n.options.messagingSenderId;this.c=new f;this.app=n;this.INTERNAL={};this.INTERNAL.delete=function(){return t.delete}};t.prototype.getToken=function(){var n=this,t=Notification.permission;return"granted"!==t?"denied"===t?Promise.reject(this.a.create("notifications-blocked")):Promise.resolve(null):this.f().then(function(t){return n.c.i(n.l,t).then(function(i){return i?i:n.c.h(n.l,t)})})};t.prototype.getToken=t.prototype.getToken;t.prototype.deleteToken=function(n){var t=this;return this.c.deleteToken(n).then(function(){return t.f()}).then(function(n){return n?n.pushManager.getSubscription():null}).then(function(n){if(n)return n.unsubscribe()})};t.prototype.deleteToken=t.prototype.deleteToken;t.prototype.f=function(){throw this.a.create("should-be-overriden");};t.prototype.requestPermission=function(){throw this.a.create("only-available-in-window");};t.prototype.useServiceWorker=function(){throw this.a.create("only-available-in-window");};t.prototype.useServiceWorker=t.prototype.useServiceWorker;t.prototype.onMessage=function(){throw this.a.create("only-available-in-window");};t.prototype.onMessage=t.prototype.onMessage;t.prototype.onTokenRefresh=function(){throw this.a.create("only-available-in-window");};t.prototype.onTokenRefresh=t.prototype.onTokenRefresh;t.prototype.setBackgroundMessageHandler=function(){throw this.a.create("only-available-in-sw");};t.prototype.setBackgroundMessageHandler=t.prototype.setBackgroundMessageHandler;t.prototype.delete=function(){et(this.c)};var g=function(n,t){var i={};return i["firebase-messaging-msg-type"]=n,i["firebase-messaging-msg-data"]=t,i},u=self,s=function(n){t.call(this,n);var i=this;this.a=new firebase.INTERNAL.ErrorFactory("messaging","Messaging",o);u.addEventListener("push",function(n){return ht(i,n)},!1);u.addEventListener("pushsubscriptionchange",function(n){return ct(i,n)},!1);u.addEventListener("notificationclick",function(n){return lt(i,n)},!1);this.b=null};y(s,t);var ht=function(n,t){var i,r;try{i=t.data.json()}catch(f){return}r=vt().then(function(t){if(t){if(i.notification||n.b)return yt(n,i)}else{if((t=i)&&"object"==typeof t.notification){var r=Object.assign({},t.notification),f={};r.data=(f.FCM_MSG=t,f);t=r}else t=void 0;if(t)return u.registration.showNotification(t.title||"",t);if(n.b)return n.b(i)}});t.waitUntil(r)},ct=function(n,t){var i=n.getToken().then(function(t){if(!t)throw n.a.create("no-fcm-token-for-resubscribe");var i=n.c;return k(i,t).then(function(t){if(!t)throw n.a.create("invalid-saved-token");return u.registration.pushManager.subscribe(b).then(function(n){return d(t.A,n,t.w)}).catch(function(r){return i.deleteToken(t.B).then(function(){throw n.a.create("unable-to-resubscribe",{message:r});})})})});t.waitUntil(i)},lt=function(n,t){var i,r,f;t.notification&&t.notification.data&&t.notification.data.FCM_MSG&&(t.stopImmediatePropagation(),t.notification.close(),i=t.notification.data.FCM_MSG,r=i.notification.click_action,r&&(f=at(r).then(function(n){return n?n:u.clients.openWindow(r)}).then(function(t){if(t)return delete i.notification,nt(n,t,g("notification-clicked",i))}),t.waitUntil(f)))};s.prototype.setBackgroundMessageHandler=function(n){if(n&&"function"!=typeof n)throw this.a.create("bg-handler-function-expected");this.b=n};s.prototype.setBackgroundMessageHandler=s.prototype.setBackgroundMessageHandler;var at=function(n){var t=new URL(n).href;return u.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(n){for(var i=null,r=0;r<n.length;r++)if(new URL(n[r].url).href===t){i=n[r];break}if(i)return i.focus(),i})},nt=function(n,t,i){return new Promise(function(r,u){if(!t)return u(n.a.create("no-window-client-to-msg"));t.postMessage(i);r()})},vt=function(){return u.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(n){return n.some(function(n){return"visible"===n.visibilityState})})},yt=function(n,t){return u.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(i){var r=g("push-msg-received",t);return Promise.all(i.map(function(t){return nt(n,t,r)}))})};if(s.prototype.f=function(){return Promise.resolve(u.registration)},i=function(n){t.call(this,n);var i=this;this.j=null;this.m=firebase.INTERNAL.createSubscribe(function(n){i.j=n});this.s=null;this.o=firebase.INTERNAL.createSubscribe(function(n){i.s=n});it(this)},y(i,t),i.prototype.getToken=function(){var n=this;return"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")?tt(this).then(function(){return t.prototype.getToken.call(n)}):Promise.reject(this.a.create("unsupported-browser"))},i.prototype.getToken=i.prototype.getToken,tt=function(n){if(n.g)return n.g;var t=document.querySelector('link[rel="manifest"]');return n.g=t?fetch(t.href).then(function(n){return n.json()}).catch(function(){return Promise.resolve()}).then(function(t){if(t&&t.gcm_sender_id&&"103953800507"!==t.gcm_sender_id)throw n.a.create("incorrect-gcm-sender-id");}):Promise.resolve(),n.g},i.prototype.requestPermission=function(){var n=this;return"granted"===Notification.permission?Promise.resolve():new Promise(function(t,i){var u=function(r){return"granted"===r?t():"denied"===r?i(n.a.create("permission-blocked")):i(n.a.create("permission-default"))},r=Notification.requestPermission(function(n){r||u(n)});r&&r.then(u)})},i.prototype.requestPermission=i.prototype.requestPermission,i.prototype.useServiceWorker=function(n){if(!(n instanceof ServiceWorkerRegistration))throw this.a.create("sw-registration-expected");if("undefined"!=typeof this.b)throw this.a.create("use-sw-before-get-token");this.b=n},i.prototype.useServiceWorker=i.prototype.useServiceWorker,i.prototype.onMessage=function(n,t,i){return this.m(n,t,i)},i.prototype.onMessage=i.prototype.onMessage,i.prototype.onTokenRefresh=function(n,t,i){return this.o(n,t,i)},i.prototype.onTokenRefresh=i.prototype.onTokenRefresh,v=function(n,t){var i=t.installing||t.waiting||t.active;return new Promise(function(r,u){if(i)if("activated"===i.state)r(t);else if("redundant"===i.state)u(n.a.create("sw-reg-redundant"));else{var f=function(){if("activated"===i.state)r(t);else if("redundant"===i.state)u(n.a.create("sw-reg-redundant"));else return;i.removeEventListener("statechange",f)};i.addEventListener("statechange",f)}else u(n.a.create("no-sw-in-reg"))})},i.prototype.f=function(){var n=this;return this.b?v(this,this.b):(this.b=null,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}).catch(function(t){throw n.a.create("failed-serviceworker-registration",{browserErrorMessage:t.message});}).then(function(t){return v(n,t).then(function(){return n.b=t,t.update(),t})}))},it=function(n){"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",function(t){if(t.data&&t.data["firebase-messaging-msg-type"])switch(t=t.data,t["firebase-messaging-msg-type"]){case"push-msg-received":case"notification-clicked":n.j.next(t["firebase-messaging-msg-data"])}},!1)},!(firebase&&firebase.INTERNAL&&firebase.INTERNAL.registerService))throw Error("Cannot install Firebase Messaging - be sure to load firebase-app.js first.");firebase.INTERNAL.registerService("messaging",function(n){return self&&"ServiceWorkerGlobalScope"in self?new s(n):new i(n)},{Messaging:i});new firebase.INTERNAL.ErrorFactory("messaging","Messaging",o);new firebase.INTERNAL.ErrorFactory("messaging","Messaging",o);new firebase.INTERNAL.ErrorFactory("messaging","Messaging",o)}).call(this)